<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Antigravity Transaction Switch &mdash; Case Study &mdash; Nirav Ramidi</title>
    <meta name="description"
        content="Distributed transaction switch with RabbitMQ, FastAPI, and real-time dashboard. At-least-once delivery, auto-failover, and SRE observability." />

    <!-- Styles (kept separate) -->
    <link rel="stylesheet" href="../../assets/css/main.css" />
    <link rel="icon" href="../../assets/img/favicon.png" />
</head>

<body>
    <a class="skip-link" href="#content">Skip to content</a>

    <!-- Header / Nav -->
    <header class="site-header" role="banner">
        <div class="container header-inner">
            <a class="brand" href="../../" aria-label="Nirav Ramidi &mdash; home">
                <span class="brand__mark" aria-hidden="true">NR</span>
                <span class="brand__text">Nirav Ramidi</span>
            </a>

            <nav class="site-nav" aria-label="Primary">
                <ul class="nav-list">
                    <li><a href="../../">Home</a></li>
                    <li><a href="../../experience.html">Experience</a></li>
                    <li><a href="../" aria-current="page">Projects</a></li>
                    <li><a href="../../writing/">Writing</a></li>
                    <li><a href="../../education/">Education</a></li>
                    <li><a href="../../about.html">About</a></li>
                    <li class="hide-on-mobile"><a href="../../resume/" class="btn btn--ghost">Resume</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <div class="nav-icons">
                    <a href="https://github.com/Nirav01" target="_blank" rel="noopener" aria-label="GitHub">GitHub</a>
                    <a href="https://www.linkedin.com/in/nirav-ramidi/" target="_blank" rel="noopener"
                        aria-label="LinkedIn">LinkedIn</a>
                </div>

                <a href="../../resume/Nirav_Ramidi_CV.pdf" class="btn btn--primary show-on-mobile">Download CV</a>
            </div>
        </div>
    </header>

    <main id="content" class="site-main" role="main">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs container" aria-label="Breadcrumb">
            <ol>
                <li><a href="../../">Home</a></li>
                <li><a href="../">Projects</a></li>
                <li><a href="../">Cloud / SRE</a></li>
                <li><span aria-current="page">Antigravity Transaction Switch</span></li>
            </ol>
        </nav>

        <!-- Hero -->
        <section class="case-hero section">
            <div class="container case-hero__inner">
                <div class="case-hero__copy">
                    <h1>Antigravity Transaction Switch</h1>
                    <p class="lead">
                        Built a distributed, message-queue-based “transaction switch” that routes synthetic
                        payment-like events (“gravity particles”) across a pool of worker nodes with
                        at-least-once delivery, automatic failover, and a live WebSocket dashboard.
                    </p>
                    <ul class="metrics">
                        <li class="chip">FastAPI + WebSockets</li>
                        <li class="chip">RabbitMQ</li>
                        <li class="chip">Redis</li>
                        <li class="chip">Docker Compose</li>
                    </ul>
                </div>
                <figure class="case-hero__media">
                    <img src="../../assets/img/case-studies/real-time-switch-hero.png"
                        alt="Architecture diagram showing clients, API gateway, RabbitMQ, workers, and dashboard"
                        loading="lazy" />
                </figure>
            </div>
        </section>

        <!-- Meta + Body -->
        <section class="case-layout section">
            <div class="container grid case-grid">

                <aside class="case-meta card">
                    <h2 class="visually-hidden">Project info</h2>
                    <dl class="meta-list">
                        <dt>Type</dt>
                        <dd>Distributed systems &middot; Cloud / SRE</dd>
                        <dt>Role</dt>
                        <dd>Solo developer</dd>
                        <dt>Focus</dt>
                        <dd>Message queues, Fault tolerance, Observability</dd>
                        <dt>Stack</dt>
                        <dd>Python, FastAPI, RabbitMQ, Redis, Docker Compose, WebSockets, Chart.js, Locust</dd>
                        <dt>Links</dt>
                        <dd>
                            <ul class="bare">
                                <li><a href="../" aria-label="Back to projects">Back to Projects</a></li>
                                <li><a href="../../experience.html">Related experience</a></li>
                            </ul>
                        </dd>
                    </dl>
                </aside>

                <article class="case-body">
                    <!-- Context -->
                    <section class="case-section" id="context">
                        <h2>Problem &amp; Goals</h2>
                        <p>
                            Real payment switches sit between front-ends (ATMs, POS, mobile apps) and multiple
                            back-end processors. They need to route transactions in real time, tolerate node
                            failures, and provide strong delivery guarantees while remaining observable and
                            horizontally scalable.
                        </p>
                        <p>
                            This project recreates a simplified version of that environment to demonstrate core
                            distributed-systems concepts in a concrete way:
                        </p>
                        <ul>
                            <li>Model a mission-critical “transaction switch” using modern cloud primitives.</li>
                            <li>Demonstrate at-least-once delivery and graceful failure handling with a message broker.
                            </li>
                            <li>Show how to scale out stateless workers without changing the API contract.</li>
                            <li>Expose health and performance via a real-time dashboard suitable for SRE-style
                                monitoring.</li>
                        </ul>
                    </section>

                    <!-- Architecture -->
                    <section class="case-section" id="architecture">
                        <h2>Architecture</h2>
                        <p>The system runs as a small cluster under Docker Compose:</p>
                        <div class="grid cards">
                            <article class="card">
                                <header class="card__header">
                                    <h3>API Gateway</h3>
                                </header>
                                <p class="card__body">FastAPI app that receives "gravity particles" (REST), exposes
                                    health checks, and streams telemetry via WebSockets.</p>
                            </article>
                            <article class="card">
                                <header class="card__header">
                                    <h3>RabbitMQ Broker</h3>
                                </header>
                                <p class="card__body">Central durable queue providing at-least-once delivery semantics
                                    via manual acknowledgements.</p>
                            </article>
                            <article class="card">
                                <header class="card__header">
                                    <h3>Worker Nodes</h3>
                                </header>
                                <p class="card__body">Stateless <code>switch-node</code> consumers that pull messages,
                                    simulate logic, and update metrics.</p>
                            </article>
                            <article class="card">
                                <header class="card__header">
                                    <h3>Redis &amp; Dashboard</h3>
                                </header>
                                <p class="card__body">Redis stores ephemeral metrics (throughput, heartbeats). The
                                    dashboard visualises this state in real-time.</p>
                            </article>
                        </div>
                    </section>

                    <!-- Message Flow -->
                    <section class="case-section" id="flow">
                        <h2>Message Flow</h2>
                        <ol>
                            <li>
                                Client sends a “gravity particle” via <code>POST /send</code> with <code>id</code>,
                                <code>payload</code>, and <code>priority</code>.
                            </li>
                            <li>
                                FastAPI validates the request and publishes it to a RabbitMQ queue with the appropriate
                                routing key.
                            </li>
                            <li>
                                One of the <code>switch-node</code> workers consumes the message, simulates processing,
                                and writes metrics to Redis.
                            </li>
                            <li>
                                On success, the worker sends a manual <code>ack</code> to RabbitMQ. On failure, it can
                                <code>nack</code> or crash—leaving the broker to requeue.
                            </li>
                            <li>
                                The dashboard subscribes to a WebSocket stream that pulls metrics from Redis and pushes
                                updates to the browser.
                            </li>
                        </ol>
                    </section>

                    <!-- Fault Tolerance -->
                    <section class="case-section" id="fault-tolerance">
                        <h2>Fault Tolerance &amp; Scaling</h2>
                        <h3>At-least-once delivery</h3>
                        <ul>
                            <li>Workers use explicit acknowledgements. A message is only "done" when <code>ack</code>'d.
                            </li>
                            <li>If a node dies mid-transaction, unacknowledged messages are automatically requeued by
                                RabbitMQ.</li>
                        </ul>

                        <h3>Horizontal scaling</h3>
                        <ul>
                            <li>Worker nodes are stateless and configured via environment variables.</li>
                            <li>Scaling is as simple as adding more <code>switch-node</code> containers; RabbitMQ
                                load-balances automatically.</li>
                        </ul>

                        <h3>Failure simulation</h3>
                        <ul>
                            <li>You can <code>docker stop</code> a worker to simulate failure.</li>
                            <li>The dashboard detects the missing heartbeat and marks the node OFFLINE.</li>
                            <li>Remaining nodes absorb the load without service interruption.</li>
                        </ul>
                    </section>

                    <!-- Dashboard -->
                    <section class="case-section" id="observability">
                        <h2>Dashboard &amp; Observability</h2>
                        <p>
                            The dashboard is a small SPA served by FastAPI that presents an SRE-friendly view of the
                            switch.
                            It features real-time charts (Chart.js) for throughput and queue depth, a live list of
                            active nodes with status indicators, and controls to inject load.
                        </p>
                        <p>
                            Metrics are kept lightweight—simple Redis counters and gauges—showcasing how to decouple
                            telemetry from the hot path.
                        </p>
                    </section>

                    <!-- Chaos Testing -->
                    <section class="case-section" id="testing">
                        <h2>Chaos &amp; Load Testing</h2>
                        <p>
                            The project includes a <strong>Locust</strong> load generator to simulate steady-state
                            traffic, burst spikes, and failure scenarios.
                            The system targets ~1,000–1,500 particles/sec with simulated latency.
                        </p>
                    </section>

                    <!-- Learnings -->
                    <section class="case-section" id="learnings">
                        <h2>What I learned</h2>
                        <ul class="checklist">
                            <li>How to use RabbitMQ for resilient, message-driven architectures.</li>
                            <li>The trade-offs between at-least-once delivery, idempotency, and complexity.</li>
                            <li>Separating API, processing, and observability into composable services.</li>
                            <li>Framing systems projects in SRE language: SLOs, availability, and failover.</li>
                        </ul>
                    </section>

                    <!-- Footer nav -->
                    <nav class="case-pager" aria-label="Case study pagination">
                        <a class="btn btn--ghost" href="../cloud-sre/library-analytics.html">&larr; Cloud-Native Library
                            Analytics</a>
                        <div class="spacer"></div>
                        <a class="btn btn--secondary" href="../hcai-viz/hcai-experiment.html">Next: HCAI Empirical Study
                            &rarr;</a>
                    </nav>
                </article>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="container footer-inner">
            <p>© <span id="year">2025</span> Nirav Ramidi</p>
            <ul class="footer-links">
                <li><a href="https://github.com/Nirav01" target="_blank" rel="noopener">GitHub</a></li>
                <li><a href="https://www.linkedin.com/in/nirav-ramidi/" target="_blank" rel="noopener">LinkedIn</a></li>
                <li><a href="../../resume/">Resume</a></li>
                <li><a href="../../contact.html">Contact</a></li>
            </ul>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../../assets/js/main.js" defer></script>
</body>

</html>